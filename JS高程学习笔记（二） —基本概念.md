

# JS高程学习笔记 ——基本概念

### 语法

**标识符**，即变量、函数、属性的名字，或者函数的参数。标识符组成规则如下：
- 首字符为字母、下划线或者美元符号（$）；
- 其他字符可以使字母、下划线、美元符号或者数字

### **变量**

- ECMAScript的变量是松散型的，所谓松散类型就是可以保存任何类型的数据。每个变量仅仅是一个用于保存值的站位符。
- 像`var message`这样定义但未初始化的变量会保存一个特殊的值`undefined`。
- 省略了`var`操作符定义的变量会成为全局变量。

### **数据类型**

​	基本数据类型：`undefined`、`null`、`Number`、`Boolean`、`String`

​	复杂数据类型：`Object`

- **typeof 操作符**

  对函数使用typeof会返回function

  `typeof undefined = 'undefined'`

  `typeof null = 'object'`

- **Undefined 类型**

  对未初始化和为声明的变量使用typeof操作符都会返回undefined值

- **Null 类型**

  - 逻辑上看，null 值表示一个空对象指针，这就是`typeof null = 'object'`的原因；

  - 如果意在保存对象的变量还没有真正保存对象，则应将该变量保存为`null`值；

  - Undefined 值是派生自 null 值的，因此ECMA-262规定对他们的相等性测试要返回true：

    `console.log(undefined == null)  //true`

- **Boolean 类型**

  可以对任何数据类型的值使用Boolean()函数，而且总会返回一个Boolean值。具体转换规则如下：

  |   数据类型    |   转换为true的值    | 转换为false的值 |
  | :-------: | :------------: | :--------: |
  |  Boolean  |      true      |   false    |
  |  String   |    任何非空字符串     | " "（空字符串）  |
  |  Number   | 任何非零数字值（包括无穷大） |   0和NaN    |
  |  Object   |      任何对象      |    null    |
  | Undefined |       无        | undefined  |

  NaN、Object、Undefined三种类型的值在相等判断时不等于false，详见相等操作符。

  ```Javascript
  null == false	//false
  undefined == false	//false
  NaN == false	//false
  NaN == NaN		//false
  var a = {};
  a == true		//false
  ```

- **Number类型**

  - 保存浮点数值需要的内存空间是保存整数值的2倍

  - Number类型使用 IEEE754格式来表示整数和浮点数值

  - 在程序内部，Number类型的实质是一个64位的浮点数，因此，JavaScript中所有的数都是浮点数。

  - 计算浮点数时精度会出现问题，这是基于 IEEE754 数值的浮点计算的通病，锅不在 EMACScript 身上

  - 遵循 IEEE 754 标准，JavaScript所能表示的**数值范围**为±1.7976931348623157e+308，其所能表示**最小小数**为±5e-324，这两个边界值可以分别通过访问`Number.MAX_VALUE`属性和`Number.MIN_VALUE`属性来获取。超出范围的的值将会转换为`Infinity`值，该值不能参与计算(或返回Infinity)。

  - JavaScript能表示并进行精确算术运算的整数范围为：[-2^53, +2^53] ，也即从最小值-9007199254740992到最大值+9007199254740992之间的范围；对于超过这个范围的整数，JavaScript依旧可以进行运算，但却不保证运算结果的精度。

  - 对于整数的位运算（比如移位等操作），JavaScript仅支持32位整型数（2的32次方），也即从-2147483648到+2147483647之间的整数。

  - NaN，用于表示一个本来要返回数值的操作数未返回数值的情况。0除以0会返回NaN，任何涉及NaN的操作都会返回NaN。(整数除以0会返回Infinity，负数会返回 -Infinity)

  - NaN与任何值都不相等，包括NaN本身。`NaN == NaN  //false`

  - 数值转换：Number()、parseInt()/parseFloat()：

    - Number()可以转换任何数据类型，规则如下：

      |      数据类型      |                   转换结果                   |
      | :------------: | :--------------------------------------: |
      | BooleanBoolean |             true=>1，false=>0             |
      |     Number     |                    不变                    |
      |      null      |                    0                     |
      |   Undefined    |                   NaN                    |
      |      字符串       | 1.字符串只包含数字，转换为对应10进制数，会忽略前导0；2.字符串为空，返回0；3.字符串包含数字以外的字符，返回NaN |
      |       对象       | 调用valueOf方法，并按上述规则转换返回值。若返回NaN，则再调用toString方法然后转换 |

    - parseInt/parseFloat 专门用于将字符串转换为数字。parseFloat会识别第一个小数点，并不会解析第二个小数点（若存在）以后的数字。

    - parseInt(' ') == NaN

    - parseFloat(' ') == NaN

- **String类型**

  - 字符串是不可变的。要改变原字符串，首先要销毁原来的字符串，然后再用另一个包含新值得字符串填充该变量。
  - 数值、布尔值、字符串和对象都有自己的 toString() 方法。
  - null、undefined值没有 toString() 方法。
  - 字符串转换方法 String():
    - 如果值有 toString() 方法，则调用改方法并返回相应的方法。
    - null返回字符串"null"，undefined值返回字符串"undefined"。

- **Object类型**

  - Object 类型是所有它的实例的基础，Object 类型所具有的人数属性和方法也同样存在与具体的对象中
  - Object 的每个实例都具有一些性质：
    - constructor：保存着创建当前对象的函数。
    - hasOwnProperty(*propertyName*)：用于检查给定属性在当前对象实例中（而不是实例原型中）是否存在。参数为字符串。
    - isPrototypeOf(*object*)：用于检查对象是否是传入对象的原型。
    - toString()：返回对象的字符串表示。
    - valueOf()：范湖对象的字符串、数值或布尔值表示。


### **操作符**

在应用于对象时，相应的操作符通常会调用对象的 valueOf() 方法和 toString() 方法

- **一元加减操作符：**对非数值应用一元加减操作符时，该操作符会像Number()转型函数一样对该值进行转换

- **位操作符：**位操作符用于在最基本的层次上，即按内存中表示数值的位来操作数值。对非数值应用位操作符，则会现将该值用Number()函数转换为一个数值，然后在应用位操作。**位操作符下NaN算作0。**

  - 按位非（~）：返回数值的反码。也即操作数的负值减1。
  - 按位与（&）
  - 按位或（|）
  - 按位异或（^）
  - 左移（<<）
  - 有符号右移（>>）
  - 无符号右移（>>>）

- **布尔操作符：**

  - 逻辑非（!）
  - 逻辑与（&&）:第一个值为真时返回第二个值，否则返回第一个
  - 逻辑或（||）：第一个值为假时返回第二个值，否则返回第一个

- **加性操作符**

  - 加法
    - Infinity + -Infinity，结果是NaN
    - 若有一个操作数为字符串，则将另一个操作数转换为字符串，然后再将两个字符串拼接起来
    - 若一个操作数是对象，则调用toString方法获得相信的字符串值；
    - 对于undefined和null则分别调用String()函数并取得字符串"undefined"和"null"
    - 其余按常规算数加法操作并返回结果
  - 减法
    - 若一个操作数是字符串、布尔值、null 或者 undefined ，则先在后台调用Number() 函数转换该值，然后进行减法计算；
    - 若一个操作数是对象，则调用valueOf() 方法将其转换为数值并计算。若对象没有valueOf()方法，则调用toString() 方法并将得到的字符转换为数字并计算。
    - 其余按常规算数减法操作并返回结果

- **相等操作符（==）**

  - 字符串和数值比较，则比较之前先将字符串转换为数值
  - 若一个操作数是对象，则调用对象的 valueOf() 方法，用得到的基本类型数值按照前面的规则进行比较
  - 若两个操作数都是对象，则比较他们是不是同一个对象。若两个操作数都指向同一个对象，则返回true，否则返回false
  - `Undefined== null  //true`
  - 对于 null 和 undefined 类型，在比较之前不能被转换为任何值


  - NaN与任何值都不相等，包括自己

- **全等操作符（===）**

  - 不经过类型转换的相等比较


  - switch语句在比较值时使用全等操作符。

### **函数参数**

- 函数体内可以使用 arguments 对象来访问参数数组，从而获取传递给函数的每个参数
- `arguments` 对象只是与数组类似（他并不是 Array 的实例 ）。可以使用方括号来访问每一个元素，如 `arguments[0]`、`arguments[1]`。
- `arguments` 的值与对应命名参数的值保持同步。但这不是说读取这两个值会访问相同的内存空间；它们的内存空间是独立的，但是值会同步。
- `arguments` 的长度有传入参数决定，而不是由定义函数时的命名参数的个数决定。因此，未被传入的参数不会与 `arguments` 里的值同步。
- 没有传递值的命名参数将会自动被赋予 undefined 值，且不会计算在 `arguments.length` 中